<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BAMACO - Bataan MaiMai Community</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
        <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/tailwind-config.js"></script>
    <script>tailwind.config = window.BAMACO_TAILWIND_CONFIG;</script>
    
    <link rel="stylesheet" href="assets/styles.css" />
  </head>
  
  <body class="bg-bg-primary text-text-primary font-sans antialiased overflow-x-hidden">
    <!-- Navbar will be dynamically generated by navbar.js -->

    <!-- Hero Section -->
    <header class="relative overflow-hidden min-h-[60vh] flex items-center justify-center py-16 sm:py-20 lg:py-24">
      <!-- Animated Background Grid -->
      <div class="absolute inset-0 -top-1/2 -left-1/2 w-[200%] h-[200%] z-0 opacity-30" 
           style="background: radial-gradient(circle, rgba(255,107,157,0.03) 1px, transparent 1px); background-size: 50px 50px; animation: gridMove 20s linear infinite;"></div>
      
      <div class="relative z-10 text-center max-w-4xl mx-auto px-4 sm:px-6 animate-fade-in-up">
        <h2 class="text-5xl sm:text-6xl lg:text-7xl font-black mb-4 bg-gradient-to-br from-accent-pink via-accent-purple to-accent-blue bg-clip-text text-transparent leading-tight">
          Welcome to BAMACO
        </h2>
        <p class="text-xl sm:text-2xl lg:text-3xl text-text-secondary mb-8 font-light">
          The Premier Bataan MaiMai Gaming Community
        </p>
      </div>
    </header>

    <!-- Stats Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 -mt-16 mb-12 relative z-20">
      <div class="grid grid-cols-3 gap-4 sm:gap-6">
        <div class="bg-bg-card border border-border-primary rounded-xl p-6 text-center hover-card hover-gradient-line group relative overflow-hidden">
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-500"></div>
          <div class="text-5xl sm:text-6xl font-black bg-gradient-to-br from-accent-pink to-accent-purple bg-clip-text text-transparent mb-2" id="player-count">0</div>
          <div class="text-text-muted text-sm uppercase tracking-wider font-semibold">Active Players</div>
        </div>
        
        <div class="bg-bg-card border border-border-primary rounded-xl p-6 text-center hover-card hover-gradient-line group relative overflow-hidden">
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-500"></div>
          <div class="text-5xl sm:text-6xl font-black bg-gradient-to-br from-accent-pink to-accent-purple bg-clip-text text-transparent mb-2" id="guild-count">0</div>
          <div class="text-text-muted text-sm uppercase tracking-wider font-semibold">Guilds</div>
        </div>
        
        <div class="bg-bg-card border border-border-primary rounded-xl p-6 text-center hover-card hover-gradient-line group relative overflow-hidden">
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-500"></div>
          <div class="text-5xl sm:text-6xl font-black bg-gradient-to-br from-accent-pink to-accent-purple bg-clip-text text-transparent mb-2" id="article-count">0</div>
          <div class="text-text-muted text-sm uppercase tracking-wider font-semibold">Guides</div>
        </div>
      </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 pb-28 sm:pb-16">
      <!-- Bento Grid Layout -->
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6 mb-8">
        <!-- Large: Queue Status (8 columns) -->
        <div class="lg:col-span-8 bg-bg-card border border-border-primary rounded-xl p-6 sm:p-8 transition-all duration-300 hover-btn-secondary relative overflow-hidden">
          <div class="inline-flex items-center gap-2 bg-bg-tertiary px-4 py-2 rounded-full mb-4 border border-border-primary">
            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse-slow"></div>
            <span class="text-sm font-semibold">LIVE</span>
          </div>
          <h3 class="text-2xl sm:text-3xl font-bold mb-6">Queue Status</h3>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
            <div class="bg-bg-tertiary border border-border-primary p-4 sm:p-5 rounded-lg text-center transition-all duration-300 hover-subtle">
              <div class="text-3xl sm:text-4xl font-black text-text-primary" id="queueCount">0</div>
              <div class="text-text-muted text-xs uppercase tracking-wider mt-1">In Queue</div>
            </div>
            
            <div class="bg-bg-tertiary border border-border-primary p-4 sm:p-5 rounded-lg text-center transition-all duration-300 hover-subtle">
              <div class="text-base sm:text-lg font-bold text-text-primary min-h-[2rem] flex items-center justify-center" id="currentlyPlaying">
                No one playing
              </div>
              <div class="text-text-muted text-xs uppercase tracking-wider mt-1">Playing Now</div>
            </div>
          </div>
          
          <div class="flex gap-3 justify-center flex-wrap">
            <a href="queue.html" class="px-6 py-3 bg-green-200 text-green-800 font-bold rounded-lg transition-all duration-300 hover-btn-primary">
              Join Queue
            </a>
            <a href="queue-history.html" class="px-6 py-3 bg-bg-secondary border border-border-primary text-text-primary font-bold rounded-lg transition-all duration-300 hover-btn-secondary">
              View History
            </a>
          </div>
        </div>

        <!-- Medium: Rating Calculator (4 columns) -->
        <div class="lg:col-span-4 bg-bg-card border border-border-primary rounded-xl p-6 transition-all duration-300 hover-btn-secondary">
          <h3 class="text-xl font-bold mb-4">Rating Calculator</h3>
          <div class="text-center">
            <div class="text-6xl my-4">ðŸ”¢</div>
            <p class="text-text-secondary text-sm mb-4">Calculate your maimai rating and get chart recommendations</p>
            <a href="calculator.html" class="inline-block px-6 py-3 bg-green-200 text-green-800 font-bold rounded-lg transition-all duration-300 hover-btn-primary">
              Open Calculator
            </a>
          </div>
        </div>
      </div>

      <!-- Featured Players -->
      <section class="mb-8">
        <h3 class="text-2xl sm:text-3xl font-bold mb-6 relative inline-block after:content-[''] after:absolute after:bottom-[-8px] after:left-0 after:w-16 after:h-1 after:bg-gradient-to-r after:from-text-primary after:to-transparent after:rounded-full">
          Featured Players
        </h3>
        <div class="space-y-3" id="featured-players"></div>
      </section>

      <!-- Bento Grid for Guilds and Articles -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-8">
        <div class="bg-bg-card border border-border-primary rounded-xl p-6 hover-btn-secondary">
          <h3 class="text-2xl font-bold mb-6 relative inline-block after:content-[''] after:absolute after:bottom-[-8px] after:left-0 after:w-16 after:h-1 after:bg-gradient-to-r after:from-text-primary after:to-transparent after:rounded-full">
            Top Guilds
          </h3>
          <div class="space-y-3" id="featured-guilds"></div>
        </div>
        
        <div class="bg-bg-card border border-border-primary rounded-xl p-6 hover-btn-secondary">
          <h3 class="text-2xl font-bold mb-6 relative inline-block after:content-[''] after:absolute after:bottom-[-8px] after:left-0 after:w-16 after:h-1 after:bg-gradient-to-r after:from-text-primary after:to-transparent after:rounded-full">
            Latest Guides
          </h3>
          <div class="space-y-3" id="latest-articles"></div>
        </div>
      </div>

      <!-- Call to Action -->
      <section class="bg-gradient-to-br from-white/5 to-white/0 border-2 border-white/10 rounded-xl p-8 sm:p-10 text-center">
        <h3 class="text-2xl sm:text-3xl font-bold mb-3">Join the Community</h3>
        <p class="text-text-secondary text-base sm:text-lg mb-6 max-w-2xl mx-auto">
          Create your player profile, join guilds, and become part of Bataan's premier MaiMai community
        </p>
        <div class="flex gap-3 justify-center flex-wrap">
          <a href="create-profile.html" class="px-6 py-3 bg-green-200 text-green-800 font-bold rounded-lg transition-all duration-300 hover-btn-primary">
            Create Profile
          </a>
          <a href="edit-profile.html" class="px-6 py-3 bg-yellow-200 text-yellow-800 border border-yellow-300 font-bold rounded-lg transition-all duration-300 hover-btn-secondary">
            Edit Profile
          </a>
        </div>
      </section>
    </main>

    <footer class="border-t border-border-primary py-8 mt-16 bg-gradient-to-r from-bg-card to-bg-secondary shadow-lg">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 text-center text-text-muted">
        <p>&copy; 2026 BAMACO - Bataan MaiMai Community. All rights reserved.</p>
      </div>
    </footer>

    <!-- Floating Action Button -->
    <a href="queue.html" 
       class="fixed bottom-6 right-4 sm:bottom-6 sm:right-6 w-20 h-20 sm:w-24 sm:h-24 flex items-center justify-center transition-all duration-300 hover:-translate-y-1 hover:scale-110 z-50"
       title="View Queue">
      <img src="https://maimai.sega.jp/storage/root/logo.png" 
           alt="MaiMai Logo" 
           class="w-20 h-20 sm:w-24 sm:h-24 object-contain drop-shadow-lg hover:drop-shadow-2xl transition-all duration-300">
    </a>

    <script src="assets/script.js"></script>
    <script src="assets/page-transitions.js"></script>
    <script src="assets/navbar.js"></script>
    <script>
      // Load homepage content
      document.addEventListener('DOMContentLoaded', () => {
        loadStats();
        loadFeaturedPlayers();
        loadTopGuilds();
        loadLatestArticles();
      });
      
      // Featured Players Rendering
      window.loadFeaturedPlayers = function() {
        fetch('config/data.json')
          .then(response => response.json())
          .then(data => {
            const container = document.getElementById('featured-players');
            const featured = data.players.slice(0, 6);
            
            container.innerHTML = featured.map((player, index) => {
              const displayName = player.ign || player.name;
              const avatarContent = player.avatarImage && player.avatarImage.trim() 
                ? `<img src="${player.avatarImage}" alt="${displayName}" class="w-full h-full object-cover" />`
                : displayName.substring(0, 2).toUpperCase();
              
              const playerTitle = player.role || player.title || player.special_title || player.main_character || 'Player';
              const titleContent = playerTitle.length >= 25 
                ? `<div class="marquee-container text-xs"><span class="marquee-content">${playerTitle}</span></div>`
                : `<p class="text-text-muted text-xs truncate">${playerTitle}</p>`;
              
              return `
              <a href="players/${player.id}.html" 
                 class="block bg-bg-card border border-border-primary rounded-lg p-4 hover-card hover:shadow-lg group relative overflow-hidden"
                 style="text-decoration: none; color: inherit; animation: fadeInUp 0.6s ease-out ${index * 0.1}s both;">
                <div class="absolute inset-0 h-1 top-0 bg-gradient-to-r from-accent-pink to-accent-purple scale-x-0 origin-left group-hover:scale-x-100 transition-transform duration-300"></div>
                <div class="flex items-center gap-3 mb-2">
                  <div class="w-10 h-10 sm:w-11 sm:h-11 bg-bg-tertiary rounded-lg flex items-center justify-center font-bold text-sm flex-shrink-0 overflow-hidden">
                    ${avatarContent}
                  </div>
                  <div class="flex-1 min-w-0">
                    <h4 class="text-base font-semibold truncate">${displayName}</h4>
                    ${titleContent}
                  </div>
                </div>
                ${player.rating ? `<div class="inline-block bg-bg-tertiary px-2 py-1 rounded-full text-xs font-semibold">Rating: ${player.rating}</div>` : ''}
              </a>
            `}).join('');
          });
      };
      
      // Top Guilds Rendering
      window.loadTopGuilds = function() {
        fetch('config/data.json')
          .then(response => response.json())
          .then(data => {
            const container = document.getElementById('featured-guilds');
            const guilds = data.guilds.slice(0, 3);
            
            container.innerHTML = guilds.map((guild, index) => `
              <a href="guilds/${guild.id}.html"
                 class="block bg-bg-secondary border border-border-primary rounded-lg p-4 hover-card hover:shadow-lg group relative overflow-hidden"
                 style="text-decoration: none; color: inherit; animation: fadeInUp 0.6s ease-out ${index * 0.1}s both;">
                <div class="absolute inset-0 h-1 top-0 bg-gradient-to-r from-accent-pink to-accent-purple scale-x-0 origin-left group-hover:scale-x-100 transition-transform duration-300"></div>
                <h4 class="text-base font-semibold mb-1">${guild.name}</h4>
                <p class="text-text-muted text-xs mb-2">${guild.members?.length || 0} Members</p>
                ${guild.description ? `<p class="text-text-secondary text-xs line-clamp-2">${guild.description}</p>` : ''}
              </a>
            `).join('');
          });
      };
      
      // Latest Articles Rendering
      window.loadLatestArticles = function() {
        fetch('config/data.json')
          .then(response => response.json())
          .then(data => {
            const container = document.getElementById('latest-articles');
            const articles = data.articles.slice(0, 3);
            
            container.innerHTML = articles.map((article, index) => `
              <a href="articles/${article.id}.html"
                 class="block bg-bg-secondary border border-border-primary rounded-lg p-4 hover-card hover:shadow-lg group relative overflow-hidden"
                 style="text-decoration: none; color: inherit; animation: fadeInUp 0.6s ease-out ${index * 0.1}s both;">
                <div class="absolute inset-0 h-1 top-0 bg-gradient-to-r from-accent-pink to-accent-purple scale-x-0 origin-left group-hover:scale-x-100 transition-transform duration-300"></div>
                <h4 class="text-base font-semibold mb-1">${article.title}</h4>
                <p class="text-text-muted text-xs mb-2">${article.category || 'Guide'}</p>
                ${article.description ? `<p class="text-text-secondary text-xs line-clamp-2">${article.description}</p>` : ''}
              </a>
            `).join('');
          });
      };
    </script>
    
    <!-- Queue Status Real-time Updates -->
    <script type="module">
      import { queueRef, currentlyPlayingRef, onValue } from './config/firebase-config.js';

      // Listen to queue count
      onValue(queueRef, (snapshot) => {
        const count = snapshot.size || 0;
        document.getElementById('queueCount').textContent = count;
      });

      // Listen to currently playing
      onValue(currentlyPlayingRef, (snapshot) => {
        const playing = [];
        snapshot.forEach((child) => {
          playing.push(child.val().name);
        });

        const display = document.getElementById('currentlyPlaying');
        if (playing.length === 0) {
          display.innerHTML = 'No one playing';
        } else if (playing.length === 1) {
          display.innerHTML = playing[0];
        } else {
          // Mobile-friendly vertical layout for multiple players
          display.innerHTML = `
            <div class="flex flex-col sm:flex-row items-center gap-1 sm:gap-2">
              <span>${playing[0]}</span>
              <span class="text-text-muted text-sm">and</span>
              <span>${playing[1] || 'Player 2'}</span>
            </div>
          `;
        }
      });
    </script>
  </body>
</html>
