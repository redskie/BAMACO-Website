# BAMACO Website - AI Coding Agent Instructions

## ğŸ¯ Quick Start for AI Agents

BAMACO is a **static website with centralized design** serving a MaiMai rhythm game community. The key principle: **All design changes happen in ONE file** (`/assets/tailwind-config.js`) to maintain consistency across 100+ HTML files.

## ğŸ—ï¸ Architecture Overview

### Centralized Design System
- **Single Source of Truth**: `/assets/tailwind-config.js` - contains ALL colors, spacing, hover effects, animations
- **NO inline styles** in HTML - everything uses Tailwind utility classes
- **Unified hover effects**: Use `hover-card`, `hover-btn-primary`, `hover-btn-secondary` instead of custom CSS
- Each HTML file loads: `<script src="assets/tailwind-config.js"></script>` then applies config

### Key Data Flow Pattern
1. **Content Creation**: Individual HTML files in `players/`, `guilds/`, `articles/` with JS object literals
2. **Data Generation**: `python generate_data.py` scans all HTML files â†’ `config/data.json`  
3. **Dynamic Rendering**: Main pages (index.html, players.html) load data.json via fetch()

```javascript
// Pattern in player HTML files:
const PLAYER_INFO = {
  name: 'Player Name',
  title: 'Role/Title',
  // ... more data
};

// Pattern in listing pages:
fetch('config/data.json')
  .then(response => response.json())
  .then(data => {
    // Render cards using createPlayerCard()
  });
```

### File Organization (Critical Paths)
```
/assets/
â”œâ”€â”€ tailwind-config.js     # ğŸ”¥ ONLY place to edit design
â”œâ”€â”€ script.js             # Core functions: createPlayerCard(), loadStats()
â”œâ”€â”€ navbar.js             # Centralized navigation generation
â””â”€â”€ styles.css            # Legacy CSS - avoid editing

/config/
â”œâ”€â”€ data.json            # Generated by Python script - DON'T edit manually
â””â”€â”€ firebase-config.js   # Queue system configuration

/players/, /guilds/, /articles/  # Individual content pages with JS objects
```

## ğŸš¨ Critical Workflows

### When Changing Design (Colors, Hover, Animations)
1. **ONLY edit** `/assets/tailwind-config.js` in the `window.BAMACO_TAILWIND_CONFIG` object
2. Changes instantly apply to ALL 100+ HTML files
3. **Never** create inline `<script>tailwind.config = {...}</script>` in HTML

### When Adding Content
1. **Players**: Copy `players/playerprofiletemplate.html`, edit `PLAYER_INFO` object
2. **Data Sync**: Run `python generate_data.py` to update listings
3. **Automated**: Use GitHub Issues workflow for player profiles with MaiMai API integration

### Queue System (Firebase Integration)
- **Real-time**: Uses Firebase Realtime Database with `onValue()` listeners
- **Entry points**: `queue.html` (public), `queue-admin.html` (protected), `queue-history.html`
- **Pattern**: Import from `./config/firebase-config.js`, set up listeners, update DOM

## ğŸ¨ Project-Specific Patterns

### Marquee Effect for Long Titles
```javascript
// Auto-activates for titles >= 25 characters
if (title.length >= 25) {
  const container = document.createElement('div');
  container.className = 'marquee-container';
  const content = document.createElement('span');
  content.className = 'marquee-content';
  content.textContent = title;
  container.appendChild(content);
  // ... replace element
}
```

### Card Generation Functions (in `/assets/script.js`)
- `createPlayerCard(player)` - Unified player display
- `createGuildCard(guild)` - Guild listings
- `createArticleCard(article)` - Article previews
- All automatically use centralized hover classes and design tokens

### Mobile-First Responsive Pattern
```html
<!-- Standard responsive classes -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6">
<!-- Text sizing -->
<h1 class="text-3xl sm:text-4xl lg:text-6xl">
<!-- Touch targets on mobile -->
<a class="min-h-10 flex items-center justify-center">
```

## ğŸ”§ External Dependencies

### MaiMai API Integration (`scripts/maimai_api.py`)
- **Endpoint**: `https://maimai-data-get.onrender.com/api/player/{friend_code}`
- **Purpose**: Fetch real IGN, rating, trophy from official game servers
- **Daily Updates**: GitHub Actions runs `scripts/daily_update.py` at 10:00 AM PHT
- **Authentication**: API requires active backend session (can fail with 500 errors)

### Firebase Queue System
- **Config**: Import from `./config/firebase-config.js` with pre-configured refs
- **Listeners Pattern**: Use `onValue(ref, callback)` for real-time updates
- **Security**: Admin panel protected by password prompt

### GitHub Issues Automation
- **Trigger**: `.github/workflows/process-profile.yml` on issue creation
- **Processor**: `scripts/process_profile_request.py` parses issue body â†’ generates HTML
- **Templates**: `.github/ISSUE_TEMPLATE/player-profile-request.yml`

## âš¡ Common Anti-Patterns to Avoid

âŒ **Never edit** `config/data.json` manually - it's generated  
âŒ **Never use** inline `style=""` or `<style>` tags - use Tailwind tokens  
âŒ **Never hardcode** colors like `#ff6b9d` - use `accent-pink` from config  
âŒ **Never break** relative paths: use `../assets/` from subdirectories  
âŒ **Never edit** hover effects per-element - use unified classes  

## ğŸ¯ Key Files for Quick Edits

| Task | Edit This File | Pattern |
|------|---------------|---------|
| Change colors/design | `/assets/tailwind-config.js` | Modify `colors` object |
| Add new player | Copy `players/playerprofiletemplate.html` | Edit `PLAYER_INFO` |
| Update listings | Run `python generate_data.py` | Regenerates data.json |
| Fix queue issues | `/config/firebase-config.js` | Check Firebase config |
| Navigation changes | `/assets/navbar.js` | Edit `NAVBAR_CONFIG.links` |

## ğŸ” Debugging Quick Wins
- **Missing data**: Check if `generate_data.py` was run after content changes
- **Design inconsistency**: Verify all pages load `/assets/tailwind-config.js`
- **Queue not updating**: Check Firebase console for connection errors
- **API failures**: Check `scripts/maimai_api.py` for 500 errors (backend session expired)