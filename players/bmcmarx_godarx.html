<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Player Profile - BAMACO</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
        <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../assets/tailwind-config.js"></script>
    <script>tailwind.config = window.BAMACO_TAILWIND_CONFIG;</script>
    
    <link rel="stylesheet" href="../assets/styles.css" />

    <!-- ============================================ -->
    <!-- EDIT YOUR PLAYER INFORMATION BELOW -->
    <!-- ============================================ -->
    <script>
      const PLAYER_INFO = {
        // Basic Information
        name: 'REDACTED', // Full player name
        ign: 'ＢＭＣ☆ＭＡＲＸ', // In-Game Name
        nickname: 'Marx, Marax', // Preferred nickname
        title: 'Phosphoribosylaminoimidazolesuccinocarboxamide', // Role or title

        // Profile Image (optional)
        avatarImage: 'https://maimaidx-eng.com/maimai-mobile/img/Icon/4abd136d1f29a4c3.png', // URL or path to avatar image (PNG/JPEG). Leave empty to use first letter of IGN

        // MaiMai Information
        maimaiFriendCode: '101232330856982', // Friend code format
        rating: 15272, // MaiMai rating
        rank: 'Unranked', // Rank (S+, S, A+, A, etc.)

        // Profile Details
        age: '17', // Age
        motto: 'One BREAK is all it takes.', // Personal motto
        joined: '2025', // Join date
        bio: 'No bio provided',

        // Guild Information
        guildId: 'godarx', // Guild ID - Must match guild's id in data.json. Set to 'None' or '' if no guild

        // Achievements (add more objects as needed)
        achievements: [
        ],

        // Published Articles (add more objects as needed)
        articles: [
        ],
      };
    </script>
  </head>
  
  <body class="bg-bg-primary text-text-primary font-sans antialiased overflow-x-hidden">
    <!-- Navbar will be dynamically generated by navbar.js -->

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="bg-bg-card p-6 rounded-lg border border-border-primary mb-8">
        <div class="w-32 h-32 rounded-full bg-bg-tertiary flex items-center justify-center text-4xl font-bold mx-auto mb-4 overflow-hidden" id="player-avatar">
          <span id="avatar-letter"></span>
        </div>
        <div class="text-center">
          <h2 class="text-3xl font-bold mb-2 text-text-primary" id="player-name"></h2>
          <p class="text-text-secondary mb-6" id="player-title"></p>
          <div class="flex flex-wrap justify-center gap-8">
            <div class="text-center">
              <span class="block text-text-secondary text-sm mb-1">Rating</span>
              <span class="text-2xl font-bold text-text-primary" id="player-rating"></span>
            </div>
            <div class="text-center">
              <span class="block text-text-secondary text-sm mb-1">Rank</span>
              <span class="text-2xl font-bold text-text-primary" id="player-rank"></span>
            </div>
            <div class="text-center">
              <span class="block text-text-secondary text-sm mb-1">Joined</span>
              <span class="text-2xl font-bold text-text-primary" id="player-joined"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="space-y-8">
        <section>
          <h3 class="text-2xl font-bold mb-4 text-text-primary border-b border-border-primary pb-2">Player Information</h3>
          <div class="bg-bg-card p-6 rounded-lg border border-border-primary">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              <div>
                <strong class="text-text-secondary block mb-2">Name:</strong>
                <p class="text-text-primary" id="player-ign"></p>
              </div>
              <div>
                <strong class="text-text-secondary block mb-2">MaiMai Friend Code:</strong>
                <p class="text-text-primary" id="player-friend-code"></p>
              </div>
              <div>
                <strong class="text-text-secondary block mb-2">Nickname:</strong>
                <p class="text-text-primary" id="player-nickname"></p>
              </div>
              <div>
                <strong class="text-text-secondary block mb-2">Motto:</strong>
                <p class="text-text-primary" id="player-motto"></p>
              </div>
              <div>
                <strong class="text-text-secondary block mb-2">Age:</strong>
                <p class="text-text-primary" id="player-age"></p>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3 class="text-2xl font-bold mb-4 text-text-primary border-b border-border-primary pb-2">About</h3>
          <div class="bg-bg-card p-6 rounded-lg border border-border-primary">
            <p class="text-text-primary leading-relaxed" id="player-bio"></p>
          </div>
        </section>

        <section>
          <h3 class="text-2xl font-bold mb-4 text-text-primary border-b border-border-primary pb-2">Guild Affiliation</h3>
          <div class="bg-bg-card p-6 rounded-lg border border-border-primary">
            <div class="flex flex-col items-center text-center gap-4">
              <div class="w-20 h-20 rounded-full bg-bg-tertiary flex items-center justify-center text-3xl font-bold overflow-hidden" id="guild-emblem-container">
                <span id="guild-emblem-letter"></span>
              </div>
              <div>
                <h4 class="text-xl font-bold mb-2">
                  <a class="text-text-primary hover:text-accent-primary transition-colors" id="guild-link" href=""></a>
                </h4>
                <p class="text-text-muted text-sm" id="guild-motto"></p>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3 class="text-2xl font-bold mb-4 text-text-primary border-b border-border-primary pb-2">Achievements</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="achievements-container"></div>
        </section>

        <section>
          <h3 class="text-2xl font-bold mb-4 text-text-primary border-b border-border-primary pb-2">Published Guides</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="articles-container"></div>
        </section>
      </div>
    </main>

    <footer class="bg-bg-secondary border-t border-border-primary py-6 mt-12 bg-gradient-to-r from-bg-card to-bg-secondary shadow-lg">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <p class="text-center text-text-secondary">
          &copy; 2026 BAMACO - Bataan MaiMai Community. All rights reserved.
        </p>
      </div>
    </footer>

    <script src="../assets/page-transitions.js"></script>
    <script src="../assets/script.js"></script>
    <script src="../assets/navbar.js"></script>

    <!-- ============================================ -->
    <!-- SCRIPT TO POPULATE PAGE WITH YOUR DATA -->
    <!-- NO NEED TO EDIT BELOW THIS LINE -->
    <!-- ============================================ -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Populate basic information
        document.title = PLAYER_INFO.name + ' - BAMACO';

        // Handle player avatar - use image if provided, otherwise show first letter of IGN
        const playerAvatar = document.getElementById('player-avatar');
        const avatarLetter = document.getElementById('avatar-letter');

        if (PLAYER_INFO.avatarImage && PLAYER_INFO.avatarImage.trim() !== '') {
          // Set image as background
          playerAvatar.style.backgroundImage = `url('${PLAYER_INFO.avatarImage}')`;
          playerAvatar.style.backgroundSize = 'cover';
          playerAvatar.style.backgroundPosition = 'center';
          avatarLetter.style.display = 'none'; // Hide letter
        } else {
          // Show first letter of IGN
          avatarLetter.textContent = PLAYER_INFO.ign.charAt(0);
        }

        document.getElementById('player-name').textContent = PLAYER_INFO.ign;
        
        // Handle long titles with rolling text effect
        const titleElement = document.getElementById('player-title');
        const title = PLAYER_INFO.title;
        
        applyMarqueeToElement(titleElement, title, 25);
        document.getElementById('player-rating').textContent =
          PLAYER_INFO.rating;
        document.getElementById('player-rank').textContent = PLAYER_INFO.rank;
        document.getElementById('player-joined').textContent =
          PLAYER_INFO.joined;

        // Populate player information section
        document.getElementById('player-ign').textContent = PLAYER_INFO.name;
        document.getElementById('player-friend-code').textContent =
          PLAYER_INFO.maimaiFriendCode;
        document.getElementById('player-nickname').textContent =
          PLAYER_INFO.nickname;
        document.getElementById('player-motto').textContent = PLAYER_INFO.motto;
        document.getElementById('player-age').textContent = PLAYER_INFO.age;

        // Populate bio
        document.getElementById('player-bio').textContent = PLAYER_INFO.bio;

        // Populate achievements or hide section if empty
        const achievementsSection = document.querySelector('.content-section:has(#achievements-container)');
        const achievementsContainer = document.getElementById(
          'achievements-container'
        );
        
        if (PLAYER_INFO.achievements && PLAYER_INFO.achievements.length > 0) {
          achievementsContainer.innerHTML = '';
          PLAYER_INFO.achievements.forEach((achievement) => {
            const achievementDiv = document.createElement('div');
            achievementDiv.className = 'bg-bg-card border border-border-primary rounded-lg p-4 text-center';
            achievementDiv.innerHTML = `
                      <div class="text-4xl mb-2">${achievement.icon}</div>
                      <div class="font-bold text-text-primary mb-1">${achievement.name}</div>
                      <div class="text-sm text-text-secondary">${achievement.description}</div>
                  `;
            achievementsContainer.appendChild(achievementDiv);
          });
        } else {
          // No achievements - hide the section
          if (achievementsSection) {
            achievementsSection.style.display = 'none';
          }
        }

        // Load guild information and articles from data.json
        fetch('../config/data.json')
          .then(response => response.json())
          .then(data => {
            // Fetch and populate guild information
            const guildSection = document.querySelector('.content-section:has(#guild-emblem-container)');
            if (PLAYER_INFO.guildId && PLAYER_INFO.guildId !== 'None' && PLAYER_INFO.guildId !== '') {
              const guild = data.guilds.find(g => g.id === PLAYER_INFO.guildId);
              if (guild) {
                // Guild found - populate information
                const guildEmblemContainer = document.getElementById('guild-emblem-container');
                const guildEmblemLetter = document.getElementById('guild-emblem-letter');
                
                // Set guild emblem (use first letter of guild name)
                guildEmblemLetter.textContent = guild.name.charAt(0).toUpperCase();
                
                // Set guild link and details
                document.getElementById('guild-link').textContent = guild.name;
                document.getElementById('guild-link').href = '../guilds/' + guild.id + '.html';
                document.getElementById('guild-motto').textContent = guild.motto;
              } else {
                // Guild ID specified but not found in data
                if (guildSection) guildSection.style.display = 'none';
              }
            } else {
              // No guild - hide section
              if (guildSection) guildSection.style.display = 'none';
            }
            
            // Fetch and populate articles
            const player = data.players.find(p => p.ign === PLAYER_INFO.ign);
            const articlesSection = document.querySelector('.content-section:has(#articles-container)');
            const articlesContainer = document.getElementById('articles-container');
            
            if (player && player.articles && player.articles.length > 0) {
              // Player has articles - show them
              articlesContainer.innerHTML = '';
              player.articles.forEach((article) => {
                const articleDiv = document.createElement('div');
                articleDiv.className = 'bg-bg-card border border-border-primary rounded-lg p-4 hover:bg-bg-card-hover transition-all duration-300 cursor-pointer';
                articleDiv.onclick = () =>
                  (window.location.href = '../articles/' + article.id + '.html');
                articleDiv.innerHTML = `
                      <h3 class="text-lg font-bold mb-2 text-text-primary">${article.title}</h3>
                      <p class="text-text-secondary text-sm mb-3">${article.excerpt}</p>
                      <div class="flex justify-between items-center text-xs text-text-muted">
                          <span>By ${PLAYER_INFO.ign}</span>
                          <span class="px-2 py-1 bg-bg-tertiary rounded">${article.category}</span>
                      </div>
                  `;
                articlesContainer.appendChild(articleDiv);
              });
            } else {
              // No articles - hide the entire section
              if (articlesSection) {
                articlesSection.style.display = 'none';
              }
            }
          })
          .catch(error => {
            console.error('Error loading articles:', error);
            // Hide section on error
            const articlesSection = document.querySelector('.content-section:has(#articles-container)');
            if (articlesSection) {
              articlesSection.style.display = 'none';
            }
          });
      });
    </script>
  
    <!-- Edit Key Storage -->
    <script>
      // Store edit key for future edits
      localStorage.setItem('profileEditKey', 'mk2gtryr-05uxm1ceseme');
      console.log('Edit key stored for profile editing');
    </script>
  </body>
</html>
